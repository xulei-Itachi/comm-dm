define(["react","react-dom","mendix/filters/builders"],(function(t,e,r){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var i,a={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */i=a,function(){var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)r.push(o);else if(Array.isArray(o)){if(o.length){var a=e.apply(null,o);a&&r.push(a)}}else if("object"===i){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var u in o)t.call(o,u)&&o[u]&&r.push(u)}}}return r.join(" ")}i.exports?(e.default=e,i.exports=e):window.classNames=e}();var u=a.exports;const c=e=>{let{className:r,bootstrapStyle:n,children:o}=e;return t.Children.count(o)>0?t.createElement("div",{className:u("alert alert-".concat(n),r)},o):null};c.displayName="Alert";class l extends Error{constructor(){super("Component is used out of context provider")}}class f extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Value is missing in context")}}function p(t){return{hasError:!0,error:t}}function y(t){return{hasError:!1,value:t}}function s(){const e=function(){let e=window["com.mendix.widgets.web.filterable.filterContext"];return null==e&&(e=t.createContext(void 0)),e}(),r=t.useContext(e);return null==r?p(new l):y(r)}function g(e,r){const[n,o]=t.useState(),i=t.useCallback((()=>{o((t=>{const r=null==e?void 0:e.getBoundingClientRect();return o=r,(n=t)&&o&&n.height===o.height&&n.width===o.width&&n.bottom===o.bottom&&n.top===o.top&&n.left===o.left&&n.right===o.right?t:r;var n,o}))}),[e]);var a;return a=r?i:void 0,t.useEffect((()=>a?function(t){let e;const r=()=>{e=window.requestAnimationFrame((()=>{t(),r()}))},n=()=>window.cancelAnimationFrame(e);return r(),n}(a):void 0),[a]),n}function d(){const[e]=t.useState("DropdownFilter".concat(function(){const t="com.mendix.widgets.web.UUID";return window[t]||(window[t]=1),window[t]++}()));return e}class b extends Error{constructor(){super("The Drop-down filter widget must be placed inside the header of the Data grid 2.0 or Gallery widget.")}}class v extends Error{}class h extends Error{constructor(){super("The attribute type being used for Drop-down filter is not 'Boolean or Enumeration'.")}}function m(t){return/Enum|Boolean/.test(t)}function S(t){return t.universe?t.universe.map((e=>{var r,n;return{caption:null!==(r=t.formatter.format(e))&&void 0!==r?r:"",value:null!==(n=null==e?void 0:e.toString())&&void 0!==n?n:""}})):[]}function j(t,e){return"Boolean"===t?"true"!==e&&"false"!==e?e:"true"===e:e}function O(t,e){const r=e.find((e=>t.every((t=>function(t,e){var r;return!(null!==(r=t.universe)&&void 0!==r?r:[]).includes(j(t.type,e))}(t,e.value)))));if(r)return n=r.caption,new v("Invalid option (".concat(n||"Unknown","): option has invalid value and can't be used with attribute(s)"));var n}function w(t){const{singleAttribute:e}=t;return void 0===e?p(new v("Can't find attribute: the attribute for filter is not configured or can't be found.")):m(e.type)?y([e]):p(new h)}function A(t){var e;const{multipleAttributes:r}=t,n=null!==(e=function(t){if(t)return Object.keys(t).map((e=>t[e])).filter((t=>m(t.type)))}(r))&&void 0!==e?e:[];return 0===n.length?p(new v(["Missing required attribute(s):","the Drop-down filter widget can't be used with the filters options you have selected.","It requires a 'Boolean or Enumeration' attribute to be selected."].join(" "))):y(n)}function x(t,e,n){return o=>{var i,a,u;const c=o.map((t=>t.value)).join(",");c!==((null===(i=n.valueAttribute)||void 0===i?void 0:i.value)||"")&&(null===(a=n.valueAttribute)||void 0===a||a.setValue(c),null===(u=n.onChange)||void 0===u||u.execute());const l=null==e?void 0:e.map((t=>function(t,e){if(!t||!t.filterable||0===e.length)return;const{id:n,type:o}=t,i=r.attribute(n),a=e.filter((e=>{var r;return null===(r=t.universe)||void 0===r?void 0:r.includes(j(t.type,e.value))})).map((t=>r.equals(i,r.literal(j(o,t.value)))));if(a.length>1)return r.or(...a);const[u]=a;return u}(t,o))).filter((t=>void 0!==t));t({getFilterCondition:()=>l&&l.length>1?r.or(...l):null==l?void 0:l[0],filterType:"enum"})}}function E(t,e){const{auto:r,filterOptions:n,ariaLabel:o,style:i,tabIndex:a,multiSelect:u,emptyOptionCaption:c,class:l,defaultValue:f}=e,s=function(t){return t.multipleAttributes?A(t):w(t)}(t);if(s.hasError)return p(s.error);const g=function(t){const{autoOptions:e,attributes:r,customOptions:n}=t;if(e)return y(r.flatMap(S));const o=n.every((t=>{let{value:e,caption:r}=t;return"available"===e.status&&"available"===r.status})),i=o?n.map((t=>{var e,r;return{caption:null!==(e=t.caption.value)&&void 0!==e?e:"",value:null!==(r=t.value.value)&&void 0!==r?r:""}})):[],a=O(r,i);return a?p(a):y(i)}({autoOptions:r,customOptions:n,attributes:s.value});if(g.hasError)return p(g.error);const d=function(t,e,r){const{singleInitialFilter:n,multipleInitialFilters:o}=t;return(n?null==n?void 0:n.map((t=>t.value)).join(","):null==e?void 0:e.flatMap((t=>null==o?void 0:o[t.id].map((t=>t.value)))).join(","))||r}(t,s.value,null==f?void 0:f.value);return y({updateFilters:x(t.filterDispatcher,s.value,e),options:g.value,defaultValue:d,ariaLabel:null==o?void 0:o.value,className:l,emptyOptionCaption:null==c?void 0:c.value,multiSelect:u,styles:i,tabIndex:a})}function P(e){return t.createElement(c,{bootstrapStyle:"danger"},"Error: ",e.error.message)}var k,I,M=Object.prototype.toString,F=function(t){var e=M.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===M.call(t.callee)),r};var T=Array.prototype.slice,R=F,D=Object.keys,C=D?function(t){return D(t)}:function(){if(I)return k;var t;if(I=1,!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=F,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor;return e&&e.prototype===t},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!l["$"+t]&&e.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();t=function(t){var o=null!==t&&"object"==typeof t,l="[object Function]"===r.call(t),p=n(t),y=o&&"[object String]"===r.call(t),s=[];if(!o&&!l&&!p)throw new TypeError("Object.keys called on a non-object");var g=a&&l;if(y&&t.length>0&&!e.call(t,0))for(var d=0;d<t.length;++d)s.push(String(d));if(p&&t.length>0)for(var b=0;b<t.length;++b)s.push(String(b));else for(var v in t)g&&"prototype"===v||!e.call(t,v)||s.push(String(v));if(i)for(var h=function(t){if("undefined"==typeof window||!f)return c(t);try{return c(t)}catch(t){return!1}}(t),m=0;m<u.length;++m)h&&"constructor"===u[m]||!e.call(t,u[m])||s.push(u[m]);return s}}return k=t}(),N=Object.keys;C.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return R(t)?N(T.call(t)):N(t)})}else Object.keys=C;return Object.keys||C};var U,W,_=C;function B(){return W?U:(W=1,U=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}var $,L=B(),q=function(){return L()&&!!Symbol.toStringTag},G="undefined"!=typeof Symbol&&Symbol,H=B(),z=function(){return"function"==typeof G&&("function"==typeof Symbol&&("symbol"==typeof G("foo")&&("symbol"==typeof Symbol("bar")&&H())))},V="Function.prototype.bind called on incompatible ",J=Array.prototype.slice,Z=Object.prototype.toString,K="[object Function]",X=function(t){var e=this;if("function"!=typeof e||Z.call(e)!==K)throw new TypeError(V+e);for(var r,n=J.call(arguments,1),o=function(){if(this instanceof r){var o=e.apply(this,n.concat(J.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(J.call(arguments)))},i=Math.max(0,e.length-n.length),a=[],u=0;u<i;u++)a.push("$"+u);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},Y=Function.prototype.bind||X,Q=Y.call(Function.call,Object.prototype.hasOwnProperty),tt=SyntaxError,et=Function,rt=TypeError,nt=function(t){try{return et('"use strict"; return ('+t+").constructor;")()}catch(t){}},ot=Object.getOwnPropertyDescriptor;if(ot)try{ot({},"")}catch(t){ot=null}var it=function(){throw new rt},at=ot?function(){try{return it}catch(t){try{return ot(arguments,"callee").get}catch(t){return it}}}():it,ut=z(),ct=Object.getPrototypeOf||function(t){return t.__proto__},lt={},ft="undefined"==typeof Uint8Array?$:ct(Uint8Array),pt={"%AggregateError%":"undefined"==typeof AggregateError?$:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?$:ArrayBuffer,"%ArrayIteratorPrototype%":ut?ct([][Symbol.iterator]()):$,"%AsyncFromSyncIteratorPrototype%":$,"%AsyncFunction%":lt,"%AsyncGenerator%":lt,"%AsyncGeneratorFunction%":lt,"%AsyncIteratorPrototype%":lt,"%Atomics%":"undefined"==typeof Atomics?$:Atomics,"%BigInt%":"undefined"==typeof BigInt?$:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?$:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?$:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?$:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?$:FinalizationRegistry,"%Function%":et,"%GeneratorFunction%":lt,"%Int8Array%":"undefined"==typeof Int8Array?$:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?$:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?$:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ut?ct(ct([][Symbol.iterator]())):$,"%JSON%":"object"==typeof JSON?JSON:$,"%Map%":"undefined"==typeof Map?$:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&ut?ct((new Map)[Symbol.iterator]()):$,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?$:Promise,"%Proxy%":"undefined"==typeof Proxy?$:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?$:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?$:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&ut?ct((new Set)[Symbol.iterator]()):$,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?$:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ut?ct(""[Symbol.iterator]()):$,"%Symbol%":ut?Symbol:$,"%SyntaxError%":tt,"%ThrowTypeError%":at,"%TypedArray%":ft,"%TypeError%":rt,"%Uint8Array%":"undefined"==typeof Uint8Array?$:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?$:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?$:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?$:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?$:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?$:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?$:WeakSet},yt=function t(e){var r;if("%AsyncFunction%"===e)r=nt("async function () {}");else if("%GeneratorFunction%"===e)r=nt("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=nt("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=ct(o.prototype))}return pt[e]=r,r},st={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},gt=Y,dt=Q,bt=gt.call(Function.call,Array.prototype.concat),vt=gt.call(Function.apply,Array.prototype.splice),ht=gt.call(Function.call,String.prototype.replace),mt=gt.call(Function.call,String.prototype.slice),St=gt.call(Function.call,RegExp.prototype.exec),jt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ot=/\\(\\)?/g,wt=function(t){var e=mt(t,0,1),r=mt(t,-1);if("%"===e&&"%"!==r)throw new tt("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new tt("invalid intrinsic syntax, expected opening `%`");var n=[];return ht(t,jt,(function(t,e,r,o){n[n.length]=r?ht(o,Ot,"$1"):e||t})),n},At=function(t,e){var r,n=t;if(dt(st,n)&&(n="%"+(r=st[n])[0]+"%"),dt(pt,n)){var o=pt[n];if(o===lt&&(o=yt(n)),void 0===o&&!e)throw new rt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new tt("intrinsic "+t+" does not exist!")},xt=function(t,e){if("string"!=typeof t||0===t.length)throw new rt("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new rt('"allowMissing" argument must be a boolean');if(null===St(/^%?[^%]*%?$/,t))throw new tt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=wt(t),n=r.length>0?r[0]:"",o=At("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],vt(r,bt([0,1],c)));for(var l=1,f=!0;l<r.length;l+=1){var p=r[l],y=mt(p,0,1),s=mt(p,-1);if(('"'===y||"'"===y||"`"===y||'"'===s||"'"===s||"`"===s)&&y!==s)throw new tt("property names with quotes must have matching quotes");if("constructor"!==p&&f||(u=!0),dt(pt,i="%"+(n+="."+p)+"%"))a=pt[i];else if(null!=a){if(!(p in a)){if(!e)throw new rt("base intrinsic for "+t+" exists, but the property is not available.");return}if(ot&&l+1>=r.length){var g=ot(a,p);a=(f=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[p]}else f=dt(a,p),a=a[p];f&&!u&&(pt[i]=a)}}return a},Et={exports:{}};!function(t){var e=Y,r=xt,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),a=r("%Object.getOwnPropertyDescriptor%",!0),u=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch(t){u=null}t.exports=function(t){var r=i(e,o,arguments);if(a&&u){var n=a(r,"length");n.configurable&&u(r,"length",{value:1+c(0,t.length-(arguments.length-1))})}return r};var l=function(){return i(e,n,arguments)};u?u(t.exports,"apply",{value:l}):t.exports.apply=l}(Et);var Pt=xt,kt=Et.exports,It=kt(Pt("String.prototype.indexOf")),Mt=function(t,e){var r=Pt(t,!!e);return"function"==typeof r&&It(t,".prototype.")>-1?kt(r):r},Ft=q(),Tt=Mt("Object.prototype.toString"),Rt=function(t){return!(Ft&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===Tt(t)},Dt=function(t){return!!Rt(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==Tt(t)&&"[object Function]"===Tt(t.callee)},Ct=function(){return Rt(arguments)}();Rt.isLegacyArguments=Dt;var Nt=Ct?Rt:Dt,Ut=xt("%Object.defineProperty%",!0),Wt=function(){if(Ut)try{return Ut({},"a",{value:1}),!0}catch(t){return!1}return!1};Wt.hasArrayLengthDefineBug=function(){if(!Wt())return null;try{return 1!==Ut([],"length",{value:1}).length}catch(t){return!0}};var _t=Wt,Bt=_,$t="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Lt=Object.prototype.toString,qt=Array.prototype.concat,Gt=Object.defineProperty,Ht=_t(),zt=Gt&&Ht,Vt=function(t,e,r,n){var o;(!(e in t)||"function"==typeof(o=n)&&"[object Function]"===Lt.call(o)&&n())&&(zt?Gt(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},Jt=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Bt(e);$t&&(n=qt.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)Vt(t,n[o],e[n[o]],r[n[o]])};Jt.supportsDescriptors=!!zt;var Zt=Jt,Kt=function(t){return t!=t},Xt=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!Kt(t)||!Kt(e))},Yt=Xt,Qt=function(){return"function"==typeof Object.is?Object.is:Yt},te=Qt,ee=Zt,re=Zt,ne=Xt,oe=Qt,ie=function(){var t=te();return ee(Object,{is:t},{is:function(){return Object.is!==t}}),t},ae=(0,Et.exports)(oe(),Object);re(ae,{getPolyfill:oe,implementation:ne,shim:ie});var ue,ce,le,fe,pe=ae,ye=Mt,se=q();if(se){ue=ye("Object.prototype.hasOwnProperty"),ce=ye("RegExp.prototype.exec"),le={};var ge=function(){throw le};fe={toString:ge,valueOf:ge},"symbol"==typeof Symbol.toPrimitive&&(fe[Symbol.toPrimitive]=ge)}var de=ye("Object.prototype.toString"),be=Object.getOwnPropertyDescriptor,ve=se?function(t){if(!t||"object"!=typeof t)return!1;var e=be(t,"lastIndex");if(!(e&&ue(e,"value")))return!1;try{ce(t,fe)}catch(t){return t===le}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===de(t)},he={exports:{}},me=function(){return"string"==typeof function(){}.name},Se=Object.getOwnPropertyDescriptor;if(Se)try{Se([],"length")}catch(t){Se=null}me.functionsHaveConfigurableNames=function(){if(!me()||!Se)return!1;var t=Se((function(){}),"name");return!!t&&!!t.configurable};var je=Function.prototype.bind;me.boundFunctionsHaveNames=function(){return me()&&"function"==typeof je&&""!==function(){}.bind().name};var Oe=me;!function(t){var e=Oe.functionsHaveConfigurableNames(),r=Object,n=TypeError;t.exports=function(){if(null!=this&&this!==r(this))throw new n("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},e&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})}(he);var we=he.exports,Ae=Zt.supportsDescriptors,xe=Object.getOwnPropertyDescriptor,Ee=function(){if(Ae&&"gim"===/a/gim.flags){var t=xe(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return we},Pe=Zt.supportsDescriptors,ke=Ee,Ie=Object.getOwnPropertyDescriptor,Me=Object.defineProperty,Fe=TypeError,Te=Object.getPrototypeOf,Re=/a/,De=Zt,Ce=he.exports,Ne=Ee,Ue=function(){if(!Pe||!Te)throw new Fe("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=ke(),e=Te(Re),r=Ie(e,"flags");return r&&r.get===t||Me(e,"flags",{configurable:!0,enumerable:!1,get:t}),t},We=(0,Et.exports)(Ne());De(We,{getPolyfill:Ne,implementation:Ce,shim:Ue});var _e,Be,$e=We,Le={}.toString,qe=Array.isArray||function(t){return"[object Array]"==Le.call(t)},Ge=Date.prototype.getDay,He=Object.prototype.toString,ze=q();function Ve(){if(Be)return _e;Be=1;var t=String.prototype.valueOf,e=Object.prototype.toString,r=q();return _e=function(n){return"string"==typeof n||"object"==typeof n&&(r?function(e){try{return t.call(e),!0}catch(t){return!1}}(n):"[object String]"===e.call(n))},_e}var Je=Number.prototype.toString,Ze=Object.prototype.toString,Ke=q(),Xe=Mt,Ye=Xe("Boolean.prototype.toString"),Qe=Xe("Object.prototype.toString"),tr=q(),er={exports:{}},rr=Object.prototype.toString;if(z()){var nr=Symbol.prototype.toString,or=/^Symbol\(.*\)$/;er.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==rr.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&or.test(nr.call(t))}(t)}catch(t){return!1}}}else er.exports=function(t){return!1};var ir={exports:{}},ar="undefined"!=typeof BigInt&&BigInt;if("function"==typeof ar&&"function"==typeof BigInt&&"bigint"==typeof ar(42)&&"bigint"==typeof BigInt(42)){var ur=BigInt.prototype.valueOf;ir.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return ur.call(t),!0}catch(t){}return!1}(t))}}else ir.exports=function(t){return!1};var cr,lr=Ve(),fr=function(t){return"number"==typeof t||"object"==typeof t&&(Ke?function(t){try{return Je.call(t),!0}catch(t){return!1}}(t):"[object Number]"===Ze.call(t))},pr=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(tr&&Symbol.toStringTag in t?function(t){try{return Ye(t),!0}catch(t){return!1}}(t):"[object Boolean]"===Qe(t))},yr=er.exports,sr=ir.exports,gr="function"==typeof Map&&Map.prototype?Map:null,dr="function"==typeof Set&&Set.prototype?Set:null;gr||(cr=function(t){return!1});var br=gr?Map.prototype.has:null,vr=dr?Set.prototype.has:null;cr||br||(cr=function(t){return!1});var hr,mr=cr||function(t){if(!t||"object"!=typeof t)return!1;try{if(br.call(t),vr)try{vr.call(t)}catch(t){return!0}return t instanceof gr}catch(t){}return!1},Sr="function"==typeof Map&&Map.prototype?Map:null,jr="function"==typeof Set&&Set.prototype?Set:null;jr||(hr=function(t){return!1});var Or=Sr?Map.prototype.has:null,wr=jr?Set.prototype.has:null;hr||wr||(hr=function(t){return!1});var Ar,xr=hr||function(t){if(!t||"object"!=typeof t)return!1;try{if(wr.call(t),Or)try{Or.call(t)}catch(t){return!0}return t instanceof jr}catch(t){}return!1},Er="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,Pr="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;Er||(Ar=function(t){return!1});var kr=Er?Er.prototype.has:null,Ir=Pr?Pr.prototype.has:null;Ar||kr||(Ar=function(t){return!1});var Mr=Ar||function(t){if(!t||"object"!=typeof t)return!1;try{if(kr.call(t,kr),Ir)try{Ir.call(t,Ir)}catch(t){return!0}return t instanceof Er}catch(t){}return!1},Fr={exports:{}},Tr=Mt,Rr=xt("%WeakSet%",!0),Dr=Tr("WeakSet.prototype.has",!0);if(Dr){var Cr=Tr("WeakMap.prototype.has",!0);Fr.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(Dr(t,Dr),Cr)try{Cr(t,Cr)}catch(t){return!0}return t instanceof Rr}catch(t){}return!1}}else Fr.exports=function(t){return!1};var Nr=mr,Ur=xr,Wr=Mr,_r=Fr.exports,Br={exports:{}},$r=Nt;if(z()||B()()){var Lr=Symbol.iterator;Br.exports=function(t){return null!=t&&void 0!==t[Lr]?t[Lr]():$r(t)?Array.prototype[Lr].call(t):void 0}}else{var qr=qe,Gr=Ve(),Hr=xt,zr=Hr("%Map%",!0),Vr=Hr("%Set%",!0),Jr=Mt,Zr=Jr("Array.prototype.push"),Kr=Jr("String.prototype.charCodeAt"),Xr=Jr("String.prototype.slice"),Yr=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},Qr=function(t,e){if(qr(t)||$r(t))return Yr(t);if(Gr(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=Kr(t,e);if(r<55296||r>56319)return e+1;var n=Kr(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=Xr(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(zr||Vr){var tn=mr,en=xr,rn=Jr("Map.prototype.forEach",!0),nn=Jr("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var on=Jr("Map.prototype.iterator",!0),an=Jr("Set.prototype.iterator",!0),un=function(t){var e=!1;return{next:function(){try{return{done:e,value:e?void 0:t.next()}}catch(t){return e=!0,{done:!0,value:void 0}}}}};var cn=Jr("Map.prototype.@@iterator",!0)||Jr("Map.prototype._es6-shim iterator_",!0),ln=Jr("Set.prototype.@@iterator",!0)||Jr("Set.prototype._es6-shim iterator_",!0);Br.exports=function(t){return function(t){if(tn(t)){if(on)return un(on(t));if(cn)return cn(t);if(rn){var e=[];return rn(t,(function(t,r){Zr(e,[r,t])})),Yr(e)}}if(en(t)){if(an)return un(an(t));if(ln)return ln(t);if(nn){var r=[];return nn(t,(function(t){Zr(r,t)})),Yr(r)}}}(t)||Qr(t)}}else Br.exports=function(t){if(null!=t)return Qr(t,!0)}}var fn=o(Object.freeze({__proto__:null,default:{}})),pn="function"==typeof Map&&Map.prototype,yn=Object.getOwnPropertyDescriptor&&pn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,sn=pn&&yn&&"function"==typeof yn.get?yn.get:null,gn=pn&&Map.prototype.forEach,dn="function"==typeof Set&&Set.prototype,bn=Object.getOwnPropertyDescriptor&&dn?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vn=dn&&bn&&"function"==typeof bn.get?bn.get:null,hn=dn&&Set.prototype.forEach,mn="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Sn="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,jn="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,On=Boolean.prototype.valueOf,wn=Object.prototype.toString,An=Function.prototype.toString,xn=String.prototype.match,En=String.prototype.slice,Pn=String.prototype.replace,kn=String.prototype.toUpperCase,In=String.prototype.toLowerCase,Mn=RegExp.prototype.test,Fn=Array.prototype.concat,Tn=Array.prototype.join,Rn=Array.prototype.slice,Dn=Math.floor,Cn="function"==typeof BigInt?BigInt.prototype.valueOf:null,Nn=Object.getOwnPropertySymbols,Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Wn="function"==typeof Symbol&&"object"==typeof Symbol.iterator,_n="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Wn||"symbol")?Symbol.toStringTag:null,Bn=Object.prototype.propertyIsEnumerable,$n=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Ln(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||Mn.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-Dn(-t):Dn(t);if(n!==t){var o=String(n),i=En.call(e,o.length+1);return Pn.call(o,r,"$&_")+"."+Pn.call(Pn.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pn.call(e,r,"$&_")}var qn=fn,Gn=qn.custom,Hn=Kn(Gn)?Gn:null;function zn(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function Vn(t){return Pn.call(String(t),/"/g,"&quot;")}function Jn(t){return!("[object Array]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}function Zn(t){return!("[object RegExp]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}function Kn(t){if(Wn)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Un)return!1;try{return Un.call(t),!0}catch(t){}return!1}var Xn=Object.prototype.hasOwnProperty||function(t){return t in this};function Yn(t,e){return Xn.call(t,e)}function Qn(t){return wn.call(t)}function to(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function eo(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return eo(En.call(t,0,e.maxStringLength),e)+n}return zn(Pn.call(Pn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ro),"single",e)}function ro(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+kn.call(e.toString(16))}function no(t){return"Object("+t+")"}function oo(t){return t+" { ? }"}function io(t,e,r,n){return t+" ("+e+") {"+(n?ao(r,n):Tn.call(r,", "))+"}"}function ao(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+Tn.call(t,","+r)+"\n"+e.prev}function uo(t,e){var r=Jn(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=Yn(t,o)?e(t[o],t):""}var i,a="function"==typeof Nn?Nn(t):[];if(Wn){i={};for(var u=0;u<a.length;u++)i["$"+a[u]]=a[u]}for(var c in t)Yn(t,c)&&(r&&String(Number(c))===c&&c<t.length||Wn&&i["$"+c]instanceof Symbol||(Mn.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if("function"==typeof Nn)for(var l=0;l<a.length;l++)Bn.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}var co,lo,fo=xt,po=Mt,yo=function t(e,r,n,o){var i=r||{};if(Yn(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Yn(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!Yn(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Yn(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Yn(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return eo(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var c=String(e);return u?Ln(e,c):c}if("bigint"==typeof e){var l=String(e)+"n";return u?Ln(e,l):l}var f=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=f&&f>0&&"object"==typeof e)return Jn(e)?"[Array]":"[Object]";var p=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Tn.call(Array(t.indent+1)," ")}return{base:r,prev:Tn.call(Array(e+1),r)}}(i,n);if(void 0===o)o=[];else if(to(o,e)>=0)return"[Circular]";function y(e,r,a){if(r&&(o=Rn.call(o)).push(r),a){var u={depth:i.depth};return Yn(i,"quoteStyle")&&(u.quoteStyle=i.quoteStyle),t(e,u,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e&&!Zn(e)){var s=function(t){if(t.name)return t.name;var e=xn.call(An.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),g=uo(e,y);return"[Function"+(s?": "+s:" (anonymous)")+"]"+(g.length>0?" { "+Tn.call(g,", ")+" }":"")}if(Kn(e)){var d=Wn?Pn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Un.call(e);return"object"!=typeof e||Wn?d:no(d)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var b="<"+In.call(String(e.nodeName)),v=e.attributes||[],h=0;h<v.length;h++)b+=" "+v[h].name+"="+zn(Vn(v[h].value),"double",i);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+In.call(String(e.nodeName))+">"}if(Jn(e)){if(0===e.length)return"[]";var m=uo(e,y);return p&&!function(t){for(var e=0;e<t.length;e++)if(to(t[e],"\n")>=0)return!1;return!0}(m)?"["+ao(m,p)+"]":"[ "+Tn.call(m,", ")+" ]"}if(function(t){return!("[object Error]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}(e)){var S=uo(e,y);return"cause"in Error.prototype||!("cause"in e)||Bn.call(e,"cause")?0===S.length?"["+String(e)+"]":"{ ["+String(e)+"] "+Tn.call(S,", ")+" }":"{ ["+String(e)+"] "+Tn.call(Fn.call("[cause]: "+y(e.cause),S),", ")+" }"}if("object"==typeof e&&a){if(Hn&&"function"==typeof e[Hn]&&qn)return qn(e,{depth:f-n});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!sn||!t||"object"!=typeof t)return!1;try{sn.call(t);try{vn.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var j=[];return gn&&gn.call(e,(function(t,r){j.push(y(r,e,!0)+" => "+y(t,e))})),io("Map",sn.call(e),j,p)}if(function(t){if(!vn||!t||"object"!=typeof t)return!1;try{vn.call(t);try{sn.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var O=[];return hn&&hn.call(e,(function(t){O.push(y(t,e))})),io("Set",vn.call(e),O,p)}if(function(t){if(!mn||!t||"object"!=typeof t)return!1;try{mn.call(t,mn);try{Sn.call(t,Sn)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return oo("WeakMap");if(function(t){if(!Sn||!t||"object"!=typeof t)return!1;try{Sn.call(t,Sn);try{mn.call(t,mn)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return oo("WeakSet");if(function(t){if(!jn||!t||"object"!=typeof t)return!1;try{return jn.call(t),!0}catch(t){}return!1}(e))return oo("WeakRef");if(function(t){return!("[object Number]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}(e))return no(y(Number(e)));if(function(t){if(!t||"object"!=typeof t||!Cn)return!1;try{return Cn.call(t),!0}catch(t){}return!1}(e))return no(y(Cn.call(e)));if(function(t){return!("[object Boolean]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}(e))return no(On.call(e));if(function(t){return!("[object String]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}(e))return no(y(String(e)));if(!function(t){return!("[object Date]"!==Qn(t)||_n&&"object"==typeof t&&_n in t)}(e)&&!Zn(e)){var w=uo(e,y),A=$n?$n(e)===Object.prototype:e instanceof Object||e.constructor===Object,x=e instanceof Object?"":"null prototype",E=!A&&_n&&Object(e)===e&&_n in e?En.call(Qn(e),8,-1):x?"Object":"",P=(A||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(E||x?"["+Tn.call(Fn.call([],E||[],x||[]),": ")+"] ":"");return 0===w.length?P+"{}":p?P+"{"+ao(w,p)+"}":P+"{ "+Tn.call(w,", ")+" }"}return String(e)},so=fo("%TypeError%"),go=fo("%WeakMap%",!0),bo=fo("%Map%",!0),vo=po("WeakMap.prototype.get",!0),ho=po("WeakMap.prototype.set",!0),mo=po("WeakMap.prototype.has",!0),So=po("Map.prototype.get",!0),jo=po("Map.prototype.set",!0),Oo=po("Map.prototype.has",!0),wo=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},Ao=Function.prototype.toString,xo="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof xo&&"function"==typeof Object.defineProperty)try{co=Object.defineProperty({},"length",{get:function(){throw lo}}),lo={},xo((function(){throw 42}),null,co)}catch(t){t!==lo&&(xo=null)}else xo=null;var Eo=/^\s*class\b/,Po=function(t){try{var e=Ao.call(t);return Eo.test(e)}catch(t){return!1}},ko=function(t){try{return!Po(t)&&(Ao.call(t),!0)}catch(t){return!1}},Io=Object.prototype.toString,Mo="function"==typeof Symbol&&!!Symbol.toStringTag,Fo=!(0 in[,]),To=function(){return!1};if("object"==typeof document){var Ro=document.all;Io.call(Ro)===Io.call(document.all)&&(To=function(t){if((Fo||!t)&&(void 0===t||"object"==typeof t))try{var e=Io.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}var Do,Co,No,Uo,Wo=xo?function(t){if(To(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{xo(t,null,co)}catch(t){if(t!==lo)return!1}return!Po(t)&&ko(t)}:function(t){if(To(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(Mo)return ko(t);if(Po(t))return!1;var e=Io.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&ko(t)},_o=Wo,Bo=Object.prototype.toString,$o=Object.prototype.hasOwnProperty,Lo=function(t,e,r){for(var n=0,o=t.length;n<o;n++)$o.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))},qo=function(t,e,r){for(var n=0,o=t.length;n<o;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)},Go=function(t,e,r){for(var n in t)$o.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))},Ho=function(t,e,r){if(!_o(e))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===Bo.call(t)?Lo(t,e,n):"string"==typeof t?qo(t,e,n):Go(t,e,n)},zo=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Vo="undefined"==typeof globalThis?n:globalThis,Jo=function(){for(var t=[],e=0;e<zo.length;e++)"function"==typeof Vo[zo[e]]&&(t[t.length]=zo[e]);return t};function Zo(){if(Co)return Do;Co=1;var t=xt("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch(e){t=null}return Do=t}var Ko=Ho,Xo=Jo,Yo=Mt,Qo=Yo("Object.prototype.toString"),ti=q(),ei="undefined"==typeof globalThis?n:globalThis,ri=Xo(),ni=Yo("String.prototype.slice"),oi={},ii=Zo(),ai=Object.getPrototypeOf;ti&&ii&&ai&&Ko(ri,(function(t){if("function"==typeof ei[t]){var e=new ei[t];if(Symbol.toStringTag in e){var r=ai(e),n=ii(r,Symbol.toStringTag);if(!n){var o=ai(r);n=ii(o,Symbol.toStringTag)}oi[t]=n.get}}}));var ui=function(){if(Uo)return No;Uo=1;var t=Ho,e=Jo,r=Mt,o=r("Object.prototype.toString"),i=q(),a="undefined"==typeof globalThis?n:globalThis,u=e(),c=r("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},l=r("String.prototype.slice"),f={},p=Zo(),y=Object.getPrototypeOf;return i&&p&&y&&t(u,(function(t){var e=new a[t];if(Symbol.toStringTag in e){var r=y(e),n=p(r,Symbol.toStringTag);if(!n){var o=y(r);n=p(o,Symbol.toStringTag)}f[t]=n.get}})),No=function(e){if(!e||"object"!=typeof e)return!1;if(!i||!(Symbol.toStringTag in e)){var r=l(o(e),8,-1);return c(u,r)>-1}return!!p&&function(e){var r=!1;return t(f,(function(t,n){if(!r)try{r=t.call(e)===n}catch(t){}})),r}(e)},No}(),ci=_,li=B()(),fi=Mt,pi=Object,yi=fi("Array.prototype.push"),si=fi("Object.prototype.propertyIsEnumerable"),gi=li?Object.getOwnPropertySymbols:null,di=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=pi(t);if(1===arguments.length)return r;for(var n=1;n<arguments.length;++n){var o=pi(arguments[n]),i=ci(o),a=li&&(Object.getOwnPropertySymbols||gi);if(a)for(var u=a(o),c=0;c<u.length;++c){var l=u[c];si(o,l)&&yi(i,l)}for(var f=0;f<i.length;++f){var p=i[f];if(si(o,p)){var y=o[p];r[p]=y}}}return r},bi=di,vi=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var a in o)i+=a;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?bi:Object.assign:bi},hi=Zt,mi=vi,Si=Zt,ji=di,Oi=vi,wi=function(){var t=mi();return hi(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},Ai=Et.exports.apply(Oi()),xi=function(t,e){return Ai(Object,arguments)};Si(xi,{getPolyfill:Oi,implementation:ji,shim:wi});var Ei=xi,Pi=_,ki=Nt,Ii=pe,Mi=ve,Fi=$e,Ti=qe,Ri=function(t){return"object"==typeof t&&null!==t&&(ze?function(t){try{return Ge.call(t),!0}catch(t){return!1}}(t):"[object Date]"===He.call(t))},Di=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:lr(t)?"String":fr(t)?"Number":pr(t)?"Boolean":yr(t)?"Symbol":sr(t)?"BigInt":void 0},Ci=xt,Ni=Mt,Ui=function(t){if(t&&"object"==typeof t){if(Nr(t))return"Map";if(Ur(t))return"Set";if(Wr(t))return"WeakMap";if(_r(t))return"WeakSet"}return!1},Wi=Br.exports,_i=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new so("Side channel does not contain "+yo(t))},get:function(n){if(go&&n&&("object"==typeof n||"function"==typeof n)){if(t)return vo(t,n)}else if(bo){if(e)return So(e,n)}else if(r)return function(t,e){var r=wo(t,e);return r&&r.value}(r,n)},has:function(n){if(go&&n&&("object"==typeof n||"function"==typeof n)){if(t)return mo(t,n)}else if(bo){if(e)return Oo(e,n)}else if(r)return function(t,e){return!!wo(t,e)}(r,n);return!1},set:function(n,o){go&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new go),ho(t,n,o)):bo?(e||(e=new bo),jo(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=wo(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},Bi=function(t){return!!ui(t)&&(ti&&Symbol.toStringTag in t?function(t){var e=!1;return Ko(oi,(function(r,n){if(!e)try{var o=r.call(t);o===n&&(e=o)}catch(t){}})),e}(t):ni(Qo(t),8,-1))},$i=Ei,Li=Ni("ArrayBuffer.prototype.byteLength",!0);function qi(t){if(!t||"object"!=typeof t||!Li)return!1;try{return Li(t),!0}catch(t){return!1}}var Gi=Ni("Date.prototype.getTime"),Hi=Object.getPrototypeOf,zi=Ni("Object.prototype.toString"),Vi=Ci("%Set%",!0),Ji=Ni("Map.prototype.has",!0),Zi=Ni("Map.prototype.get",!0),Ki=Ni("Map.prototype.size",!0),Xi=Ni("Set.prototype.add",!0),Yi=Ni("Set.prototype.delete",!0),Qi=Ni("Set.prototype.has",!0),ta=Ni("Set.prototype.size",!0);function ea(t,e,r,n){for(var o,i=Wi(t);(o=i.next())&&!o.done;)if(aa(e,o.value,r,n))return Yi(t,o.value),!0;return!1}function ra(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function na(t,e,r,n,o,i){var a=ra(r);if(null!=a)return a;var u=Zi(e,a),c=$i({},o,{strict:!1});return!(void 0===u&&!Ji(e,a)||!aa(n,u,c,i))&&(!Ji(t,a)&&aa(n,u,c,i))}function oa(t,e,r){var n=ra(r);return null!=n?n:Qi(e,n)&&!Qi(t,n)}function ia(t,e,r,n,o,i){for(var a,u,c=Wi(t);(a=c.next())&&!a.done;)if(aa(r,u=a.value,o,i)&&aa(n,Zi(e,u),o,i))return Yi(t,u),!0;return!1}function aa(t,e,r,n){var o=r||{};if(o.strict?Ii(t,e):t===e)return!0;if(Di(t)!==Di(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return o.strict?Ii(t,e):t==e;var i,a=n.has(t),u=n.has(e);if(a&&u){if(n.get(t)===n.get(e))return!0}else i={};return a||n.set(t,i),u||n.set(e,i),function(t,e,r,n){var o,i;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(zi(t)!==zi(e))return!1;if(ki(t)!==ki(e))return!1;var a=Ti(t),u=Ti(e);if(a!==u)return!1;var c=t instanceof Error,l=e instanceof Error;if(c!==l)return!1;if((c||l)&&(t.name!==e.name||t.message!==e.message))return!1;var f=Mi(t),p=Mi(e);if(f!==p)return!1;if((f||p)&&(t.source!==e.source||Fi(t)!==Fi(e)))return!1;var y=Ri(t),s=Ri(e);if(y!==s)return!1;if((y||s)&&Gi(t)!==Gi(e))return!1;if(r.strict&&Hi&&Hi(t)!==Hi(e))return!1;if(Bi(t)!==Bi(e))return!1;var g=ua(t),d=ua(e);if(g!==d)return!1;if(g||d){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var b=qi(t),v=qi(e);if(b!==v)return!1;if(b||v)return Li(t)===Li(e)&&("function"==typeof Uint8Array&&aa(new Uint8Array(t),new Uint8Array(e),r,n));if(typeof t!=typeof e)return!1;var h=Pi(t),m=Pi(e);if(h.length!==m.length)return!1;for(h.sort(),m.sort(),o=h.length-1;o>=0;o--)if(h[o]!=m[o])return!1;for(o=h.length-1;o>=0;o--)if(!aa(t[i=h[o]],e[i],r,n))return!1;var S=Ui(t),j=Ui(e);if(S!==j)return!1;if("Set"===S||"Set"===j)return function(t,e,r,n){if(ta(t)!==ta(e))return!1;var o,i,a,u=Wi(t),c=Wi(e);for(;(o=u.next())&&!o.done;)if(o.value&&"object"==typeof o.value)a||(a=new Vi),Xi(a,o.value);else if(!Qi(e,o.value)){if(r.strict)return!1;if(!oa(t,e,o.value))return!1;a||(a=new Vi),Xi(a,o.value)}if(a){for(;(i=c.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!ea(a,i.value,r.strict,n))return!1}else if(!r.strict&&!Qi(t,i.value)&&!ea(a,i.value,r.strict,n))return!1;return 0===ta(a)}return!0}(t,e,r,n);if("Map"===S)return function(t,e,r,n){if(Ki(t)!==Ki(e))return!1;var o,i,a,u,c,l,f=Wi(t),p=Wi(e);for(;(o=f.next())&&!o.done;)if(u=o.value[0],c=o.value[1],u&&"object"==typeof u)a||(a=new Vi),Xi(a,u);else if(void 0===(l=Zi(e,u))&&!Ji(e,u)||!aa(c,l,r,n)){if(r.strict)return!1;if(!na(t,e,u,c,r,n))return!1;a||(a=new Vi),Xi(a,u)}if(a){for(;(i=p.next())&&!i.done;)if(u=i.value[0],l=i.value[1],u&&"object"==typeof u){if(!ia(a,t,u,l,r,n))return!1}else if(!(r.strict||t.has(u)&&aa(Zi(t,u),l,r,n)||ia(a,t,u,l,$i({},r,{strict:!1}),n)))return!1;return 0===ta(a)}return!0}(t,e,r,n);return!0}(t,e,o,n)}function ua(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&(!(t.length>0&&"number"!=typeof t[0])&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))))}var ca=function(t,e,r){return aa(t,e,r,_i())};const la=()=>{};function fa(r){const{ariaLabel:n,className:o,defaultValue:i,status:a,footer:c,emptyOptionCaption:l,multiSelect:f,id:p,options:y,tabIndex:s,styles:d,updateFilters:b,onTriggerClick:v,onContentScroll:h}=r,[m,S]=t.useState(""),[j,O]=t.useState([]),[w,A]=t.useState([]),[x,E]=t.useState(!1),[P,k]=t.useState(0),I=t.useRef(!1),M=t.useRef(null),F=t.useRef(null),T=g(M.current,x),R=t.useCallback((t=>{0===(null==t?void 0:t.length)?(S(null!=l?l:""),A([])):(S(t.map((t=>t.caption)).join(",")),A((e=>ca(t,e,{strict:!0})?e:t)))}),[l]),D=t.useCallback((t=>{f?R(function(t,e){const r=[...t],n=t.findIndex(pa(e));n>-1?r.splice(n,1):r.push(e);return r}(w,t)):(S(t.caption),A([t]),E(!1))}),[w,f,R]);var C,N;C=[M,F],N=()=>E(!1),t.useEffect((()=>{const t=t=>{if(Array.isArray(C)){if(C.some((e=>!e.current||e.current.contains(t.target))))return}else if(!C.current||C.current.contains(t.target))return;N()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[C,N]),t.useEffect((()=>{var t,e;if(!I.current&&j.length>0){if(f)if(i){const t=i.split(",").map((t=>j.find((e=>e.value===t)))).filter(Boolean);R(t)}else S(null!=l?l:"");else{const r=null!==(t=j.find((t=>t.value===i)))&&void 0!==t?t:j[0];S(null!==(e=null==r?void 0:r.caption)&&void 0!==e?e:""),A((t=>{const e=[r];return ca(e,t,{strict:!0})?t:e}))}I.current=!0}}),[i,l,f,j,R]),t.useEffect((()=>{const t=[...f?[]:[{caption:null!=l?l:"",value:""}],...y];O((e=>ca(e,t,{strict:!0})?e:t)),I.current=!1}),[l,f,y,i]),t.useEffect((()=>{null==b||b(w)}),[w]);const U=0===w.length||m===l,W=t.useCallback((()=>{E((t=>!t)),setTimeout((()=>{var t,e;null===(e=null===(t=F.current)||void 0===t?void 0:t.querySelector("li.filter-selected"))||void 0===e||e.focus()}),10),v&&v()}),[v]);return t.createElement("div",{className:u("dropdown-container",o),"data-focusindex":null!=s?s:0,ref:M,style:d},a||t.createElement("input",{value:U?"":m,placeholder:U?l:void 0,className:"form-control dropdown-triggerer",onClick:W,onChange:la,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),W())},"aria-haspopup":!0,ref:t=>{t&&t.clientWidth&&k(t.clientWidth)},"aria-expanded":x,"aria-controls":"".concat(p,"-dropdown-list"),"aria-label":n}),x?(()=>{const r=j.length>(f?0:1),n=r?t.createElement("ul",{id:"".concat(p,"-dropdown-list"),className:"dropdown-list dropdown-content-section",role:"menu","data-focusindex":0},r&&j.map(((e,r)=>t.createElement("li",{className:u({"filter-selected":!f&&ya(w,e)}),key:"val:".concat(e.value),onClick:t=>{t.preventDefault(),t.stopPropagation(),D(e)},onKeyDown:t=>{var n,o;"Enter"===t.key||" "===t.key?(t.preventDefault(),t.stopPropagation(),D(e)):("Tab"===t.key&&(r+1===j.length||t.shiftKey&&0===r)||"Escape"===t.key)&&(t.preventDefault(),E(!1),null===(o=null===(n=M.current)||void 0===n?void 0:n.querySelector("input"))||void 0===o||o.focus())},role:"menuitem",tabIndex:0},f?t.createElement(t.Fragment,null,t.createElement("input",{id:"".concat(p,"_checkbox_toggle_").concat(r),type:"checkbox",checked:ya(w,e),onChange:la}),t.createElement("label",{htmlFor:"".concat(p,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"}},e.caption)):t.createElement("div",{className:"filter-label"},e.caption))))):null;return e.createPortal(t.createElement("div",{className:"dropdown-content",onScroll:h,ref:F,style:{position:"fixed",width:P,top:null==T?void 0:T.bottom,left:null==T?void 0:T.left,zIndex:102}},n,c),document.body)})():null)}function pa(t){return e=>t.value===e.value}function ya(t,e){return!!t.find(pa(e))}function sa(e){const r=d(),n=E(e.context,e.widgetProps);return n.hasError?t.createElement(P,{error:n.error}):t.createElement(fa,{...n.value,id:r})}function ga(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e}function da(t,e){let r=0,n=0;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];const u=(new Date).getTime()-n,c=()=>{r=0,n=(new Date).getTime(),t(...i)};r||(u>=e?c():r=window.setTimeout(c,e-u))}}const ba=(t,e,r)=>{t((t=>"available"===e.status&&e.hasMoreItems?t+r:t))};function va(t,e){const n=e.map((e=>function(t,e){return r.equals(r.association(t.id),r.literal(e))}(t,e)));return n.length>1?r.or(...n):n[0]}function ha(t,e){const n=e.map((e=>function(t,e){const n=e.length?r.literal(e.slice()):r.empty();return r.contains(r.association(t.id),n)}(t,[e])));return n.length>1?r.or(...n):n[0]}function ma(){return t.createElement("div",{className:"form-control text-normal disabled"},"Not filterable")}function Sa(e){const{loading:r}=e;return r?t.createElement("div",{className:"dropdown-footer dropdown-content-section"},t.createElement("div",{className:"dropdown-footer-item"},t.createElement("div",{className:"dropdown-loading"},"Loading..."))):null}function ja(e){let{dispatch:r,widgetProps:n,associationProps:o}=e;var i,a;const{association:u,optionsSource:c,getOptionLabel:l}=o,f=d(),p=u.filterable,[y,s,g]=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;var o;const i=t.useRef(0),a="loading"===e.status,u=0!==i.current,c=t=>{const r=t(i.current);i.current=r,e.limit!==r&&e.setLimit(r)},l=()=>c((t=>0===t?r:t)),f=t.useMemo((()=>da(ba,n)),[n]),p=()=>f(c,e,r);return t.useEffect((()=>c((()=>0))),[]),ga(l,p,{isFetched:u,isLoading:a,hasMore:!!e.hasMoreItems,items:null!==(o=e.items)&&void 0!==o?o:[]})}(c),b=p?g.items:[],[v,h]=function(t,e){return ga(t.map((t=>({value:t.id,caption:e(t)}))),Object.fromEntries(t.map((t=>[t.id,t]))))}(b,l),m=function(t,e,r,n){return o=>{const i=function(t,e){var r;return(""===(null===(r=e[0])||void 0===r?void 0:r.value)?[]:e).map((e=>t[e.value]))}(r,o);t({getFilterCondition(){if(!(i.length<1))return"Reference"===e.type?va(e,i):ha(e,i)}}),n&&n.execute()}}(r,u,h),S=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{triggerZoneHeight:n=0}=r,o=t.useRef({callback:e,offset:Math.max(n,0),isInDeadZone:!1});o.current.callback=e;return t.useCallback((t=>{const{current:{isInDeadZone:e,callback:r,offset:n}}=o,i=t.currentTarget.scrollHeight-n,a=Math.floor(i-t.currentTarget.scrollTop)<=Math.floor(t.currentTarget.clientHeight),u=!e&&a;o.current.isInDeadZone=a,u&&r(t)}),[])}(s,{triggerZoneHeight:100});return t.createElement(fa,{id:f,updateFilters:m,options:v,ariaLabel:null===(i=n.ariaLabel)||void 0===i?void 0:i.value,className:n.class,emptyOptionCaption:null===(a=n.emptyOptionCaption)||void 0===a?void 0:a.value,multiSelect:n.multiSelect,styles:n.style,tabIndex:n.tabIndex,status:p?void 0:t.createElement(ma,null),footer:t.createElement(Sa,{loading:g.isLoading}),onTriggerClick:y,onContentScroll:g.hasMore?S:void 0})}function Oa(e){let{context:r,widgetProps:n}=e;const o=null==(i=r).associationProperties?p(new f("referenceProperties is undefined")):y(i.associationProperties);var i;return o.hasError?t.createElement(P,{error:o.error}):t.createElement(ja,{widgetProps:n,associationProps:o.value,dispatch:r.filterDispatcher})}return function(e){const r=s();if(r.hasError)return t.createElement(P,{error:new b});const n=r.value.associationProperties?Oa:sa;return t.createElement(n,{context:r.value,widgetProps:e})}}));
