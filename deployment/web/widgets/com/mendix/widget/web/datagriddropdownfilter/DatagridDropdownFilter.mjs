import{Children as t,createElement as e,useEffect as r,useContext as n,createContext as o,useState as i,useCallback as a,useRef as u,Fragment as c,useMemo as l}from"react";import{createPortal as f}from"react-dom";import{or as p,attribute as y,equals as s,literal as d,association as g,empty as b,contains as v}from"mendix/filters/builders";var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var S,j={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/S=j,function(){var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)r.push(o);else if(Array.isArray(o)){if(o.length){var a=e.apply(null,o);a&&r.push(a)}}else if("object"===i){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var u in o)t.call(o,u)&&o[u]&&r.push(u)}}}return r.join(" ")}S.exports?(e.default=e,S.exports=e):window.classNames=e}();var O=j.exports;const w=r=>{let{className:n,bootstrapStyle:o,children:i}=r;return t.count(i)>0?e("div",{className:O("alert alert-".concat(o),n)},i):null};w.displayName="Alert";class A extends Error{constructor(){super("Component is used out of context provider")}}class x extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Value is missing in context")}}function P(t){return{hasError:!0,error:t}}function E(t){return{hasError:!1,value:t}}function I(){const t=function(){let t=window["com.mendix.widgets.web.filterable.filterContext"];return null==t&&(t=o(void 0)),t}(),e=n(t);return null==e?P(new A):E(e)}function k(t,e){const[n,o]=i(),u=a((()=>{o((e=>{const r=null==t?void 0:t.getBoundingClientRect();return o=r,(n=e)&&o&&n.height===o.height&&n.width===o.width&&n.bottom===o.bottom&&n.top===o.top&&n.left===o.left&&n.right===o.right?e:r;var n,o}))}),[t]);var c;return r((()=>c?function(t){let e;const r=()=>{e=window.requestAnimationFrame((()=>{t(),r()}))},n=()=>window.cancelAnimationFrame(e);return r(),n}(c):void 0),[c=e?u:void 0]),n}function M(){const[t]=i("DropdownFilter".concat(function(){const t="com.mendix.widgets.web.UUID";return window[t]||(window[t]=1),window[t]++}()));return t}class F extends Error{constructor(){super("The Drop-down filter widget must be placed inside the header of the Data grid 2.0 or Gallery widget.")}}class T extends Error{}class R extends Error{constructor(){super("The attribute type being used for Drop-down filter is not 'Boolean or Enumeration'.")}}function D(t){return/Enum|Boolean/.test(t)}function N(t){return t.universe?t.universe.map((e=>{var r,n;return{caption:null!==(r=t.formatter.format(e))&&void 0!==r?r:"",value:null!==(n=null==e?void 0:e.toString())&&void 0!==n?n:""}})):[]}function U(t,e){return"Boolean"===t?"true"!==e&&"false"!==e?e:"true"===e:e}function W(t,e){const r=e.find((e=>t.every((t=>function(t,e){var r;return!(null!==(r=t.universe)&&void 0!==r?r:[]).includes(U(t.type,e))}(t,e.value)))));if(r)return n=r.caption,new T("Invalid option (".concat(n||"Unknown","): option has invalid value and can't be used with attribute(s)"));var n}function _(t,e){if(!t||!t.filterable||0===e.length)return;const{id:r,type:n}=t,o=y(r),i=e.filter((e=>{var r;return null===(r=t.universe)||void 0===r?void 0:r.includes(U(t.type,e.value))})).map((t=>s(o,d(U(n,t.value)))));if(i.length>1)return p(...i);const[a]=i;return a}function B(t){const{singleAttribute:e}=t;return void 0===e?P(new T("Can't find attribute: the attribute for filter is not configured or can't be found.")):D(e.type)?E([e]):P(new R)}function C(t){var e;const{multipleAttributes:r}=t,n=null!==(e=function(t){if(t)return Object.keys(t).map((e=>t[e])).filter((t=>D(t.type)))}(r))&&void 0!==e?e:[];return 0===n.length?P(new T(["Missing required attribute(s):","the Drop-down filter widget can't be used with the filters options you have selected.","It requires a 'Boolean or Enumeration' attribute to be selected."].join(" "))):E(n)}function $(t,e){const{auto:r,filterOptions:n,ariaLabel:o,style:i,tabIndex:a,multiSelect:u,emptyOptionCaption:c,class:l,defaultValue:f}=e,y=function(t){return t.multipleAttributes?C(t):B(t)}(t);if(y.hasError)return P(y.error);const s=function(t){const{autoOptions:e,attributes:r,customOptions:n}=t;if(e)return E(r.flatMap(N));const o=n.every((t=>{let{value:e,caption:r}=t;return"available"===e.status&&"available"===r.status})),i=o?n.map((t=>{var e,r;return{caption:null!==(e=t.caption.value)&&void 0!==e?e:"",value:null!==(r=t.value.value)&&void 0!==r?r:""}})):[],a=W(r,i);return a?P(a):E(i)}({autoOptions:r,customOptions:n,attributes:y.value});if(s.hasError)return P(s.error);const d=function(t,e,r){const{singleInitialFilter:n,multipleInitialFilters:o}=t,i=n?null==n?void 0:n.map((t=>t.value)).join(","):null==e?void 0:e.flatMap((t=>null==o?void 0:o[t.id].map((t=>t.value)))).join(",");return i||r}(t,y.value,null==f?void 0:f.value),g=function(t,e,r){return n=>{var o,i,a;const u=n.map((t=>t.value)).join(",");u!==((null===(o=r.valueAttribute)||void 0===o?void 0:o.value)||"")&&(null===(i=r.valueAttribute)||void 0===i||i.setValue(u),null===(a=r.onChange)||void 0===a||a.execute());const c=null==e?void 0:e.map((t=>_(t,n))).filter((t=>void 0!==t));t({getFilterCondition:()=>c&&c.length>1?p(...c):null==c?void 0:c[0],filterType:"enum"})}}(t.filterDispatcher,y.value,e);return E({updateFilters:g,options:s.value,defaultValue:d,ariaLabel:null==o?void 0:o.value,className:l,emptyOptionCaption:null==c?void 0:c.value,multiSelect:u,styles:i,tabIndex:a})}function L(t){return e(w,{bootstrapStyle:"danger"},"Error: ",t.error.message)}var q,G,H=Object.prototype.toString,z=function(t){var e=H.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===H.call(t.callee)),r};var V=Array.prototype.slice,J=z,Z=Object.keys,K=Z?function(t){return Z(t)}:function(){if(G)return q;var t;if(G=1,!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=z,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor;return e&&e.prototype===t},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!l["$"+t]&&e.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();t=function(t){var o=null!==t&&"object"==typeof t,l="[object Function]"===r.call(t),p=n(t),y=o&&"[object String]"===r.call(t),s=[];if(!o&&!l&&!p)throw new TypeError("Object.keys called on a non-object");var d=a&&l;if(y&&t.length>0&&!e.call(t,0))for(var g=0;g<t.length;++g)s.push(String(g));if(p&&t.length>0)for(var b=0;b<t.length;++b)s.push(String(b));else for(var v in t)d&&"prototype"===v||!e.call(t,v)||s.push(String(v));if(i)for(var h=function(t){if("undefined"==typeof window||!f)return c(t);try{return c(t)}catch(t){return!1}}(t),m=0;m<u.length;++m)h&&"constructor"===u[m]||!e.call(t,u[m])||s.push(u[m]);return s}}return q=t}(),X=Object.keys;K.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return J(t)?X(V.call(t)):X(t)})}else Object.keys=K;return Object.keys||K};var Y,Q,tt=K;function et(){return Q?Y:(Q=1,Y=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}var rt=et(),nt=function(){return rt()&&!!Symbol.toStringTag},ot="undefined"!=typeof Symbol&&Symbol,it=et(),at=function(){return"function"==typeof ot&&("function"==typeof Symbol&&("symbol"==typeof ot("foo")&&("symbol"==typeof Symbol("bar")&&it())))},ut="Function.prototype.bind called on incompatible ",ct=Array.prototype.slice,lt=Object.prototype.toString,ft=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==lt.call(e))throw new TypeError(ut+e);for(var r,n=ct.call(arguments,1),o=function(){if(this instanceof r){var o=e.apply(this,n.concat(ct.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(ct.call(arguments)))},i=Math.max(0,e.length-n.length),a=[],u=0;u<i;u++)a.push("$"+u);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r},pt=Function.prototype.bind||ft,yt=pt.call(Function.call,Object.prototype.hasOwnProperty),st=SyntaxError,dt=Function,gt=TypeError,bt=function(t){try{return dt('"use strict"; return ('+t+").constructor;")()}catch(t){}},vt=Object.getOwnPropertyDescriptor;if(vt)try{vt({},"")}catch(t){vt=null}var ht=function(){throw new gt},mt=vt?function(){try{return ht}catch(t){try{return vt(arguments,"callee").get}catch(t){return ht}}}():ht,St=at(),jt=Object.getPrototypeOf||function(t){return t.__proto__},Ot={},wt="undefined"==typeof Uint8Array?undefined:jt(Uint8Array),At={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":St?jt([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":Ot,"%AsyncGenerator%":Ot,"%AsyncGeneratorFunction%":Ot,"%AsyncIteratorPrototype%":Ot,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":dt,"%GeneratorFunction%":Ot,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":St?jt(jt([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&St?jt((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&St?jt((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":St?jt(""[Symbol.iterator]()):undefined,"%Symbol%":St?Symbol:undefined,"%SyntaxError%":st,"%ThrowTypeError%":mt,"%TypedArray%":wt,"%TypeError%":gt,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},xt=function t(e){var r;if("%AsyncFunction%"===e)r=bt("async function () {}");else if("%GeneratorFunction%"===e)r=bt("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=bt("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=jt(o.prototype))}return At[e]=r,r},Pt={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Et=pt,It=yt,kt=Et.call(Function.call,Array.prototype.concat),Mt=Et.call(Function.apply,Array.prototype.splice),Ft=Et.call(Function.call,String.prototype.replace),Tt=Et.call(Function.call,String.prototype.slice),Rt=Et.call(Function.call,RegExp.prototype.exec),Dt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Nt=/\\(\\)?/g,Ut=function(t){var e=Tt(t,0,1),r=Tt(t,-1);if("%"===e&&"%"!==r)throw new st("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new st("invalid intrinsic syntax, expected opening `%`");var n=[];return Ft(t,Dt,(function(t,e,r,o){n[n.length]=r?Ft(o,Nt,"$1"):e||t})),n},Wt=function(t,e){var r,n=t;if(It(Pt,n)&&(n="%"+(r=Pt[n])[0]+"%"),It(At,n)){var o=At[n];if(o===Ot&&(o=xt(n)),void 0===o&&!e)throw new gt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new st("intrinsic "+t+" does not exist!")},_t=function(t,e){if("string"!=typeof t||0===t.length)throw new gt("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new gt('"allowMissing" argument must be a boolean');if(null===Rt(/^%?[^%]*%?$/,t))throw new st("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Ut(t),n=r.length>0?r[0]:"",o=Wt("%"+n+"%",e),i=o.name,a=o.value,u=!1,c=o.alias;c&&(n=c[0],Mt(r,kt([0,1],c)));for(var l=1,f=!0;l<r.length;l+=1){var p=r[l],y=Tt(p,0,1),s=Tt(p,-1);if(('"'===y||"'"===y||"`"===y||'"'===s||"'"===s||"`"===s)&&y!==s)throw new st("property names with quotes must have matching quotes");if("constructor"!==p&&f||(u=!0),It(At,i="%"+(n+="."+p)+"%"))a=At[i];else if(null!=a){if(!(p in a)){if(!e)throw new gt("base intrinsic for "+t+" exists, but the property is not available.");return}if(vt&&l+1>=r.length){var d=vt(a,p);a=(f=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[p]}else f=It(a,p),a=a[p];f&&!u&&(At[i]=a)}}return a},Bt={exports:{}};!function(t){var e=pt,r=_t,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),a=r("%Object.getOwnPropertyDescriptor%",!0),u=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(u)try{u({},"a",{value:1})}catch(t){u=null}t.exports=function(t){var r=i(e,o,arguments);if(a&&u){var n=a(r,"length");n.configurable&&u(r,"length",{value:1+c(0,t.length-(arguments.length-1))})}return r};var l=function(){return i(e,n,arguments)};u?u(t.exports,"apply",{value:l}):t.exports.apply=l}(Bt);var Ct=_t,$t=Bt.exports,Lt=$t(Ct("String.prototype.indexOf")),qt=function(t,e){var r=Ct(t,!!e);return"function"==typeof r&&Lt(t,".prototype.")>-1?$t(r):r},Gt=nt(),Ht=qt("Object.prototype.toString"),zt=function(t){return!(Gt&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===Ht(t)},Vt=function(t){return!!zt(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==Ht(t)&&"[object Function]"===Ht(t.callee)},Jt=function(){return zt(arguments)}();zt.isLegacyArguments=Vt;var Zt=Jt?zt:Vt,Kt=_t("%Object.defineProperty%",!0),Xt=function(){if(Kt)try{return Kt({},"a",{value:1}),!0}catch(t){return!1}return!1};Xt.hasArrayLengthDefineBug=function(){if(!Xt())return null;try{return 1!==Kt([],"length",{value:1}).length}catch(t){return!0}};var Yt=Xt,Qt=tt,te="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),ee=Object.prototype.toString,re=Array.prototype.concat,ne=Object.defineProperty,oe=Yt(),ie=ne&&oe,ae=function(t,e,r,n){var o;(!(e in t)||"function"==typeof(o=n)&&"[object Function]"===ee.call(o)&&n())&&(ie?ne(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},ue=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Qt(e);te&&(n=re.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)ae(t,n[o],e[n[o]],r[n[o]])};ue.supportsDescriptors=!!ie;var ce=ue,le=function(t){return t!=t},fe=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!le(t)||!le(e))},pe=fe,ye=function(){return"function"==typeof Object.is?Object.is:pe},se=ye,de=ce,ge=ce,be=fe,ve=ye,he=function(){var t=se();return de(Object,{is:t},{is:function(){return Object.is!==t}}),t},me=(0,Bt.exports)(ve(),Object);ge(me,{getPolyfill:ve,implementation:be,shim:he});var Se,je,Oe,we,Ae=me,xe=qt,Pe=nt();if(Pe){Se=xe("Object.prototype.hasOwnProperty"),je=xe("RegExp.prototype.exec"),Oe={};var Ee=function(){throw Oe};we={toString:Ee,valueOf:Ee},"symbol"==typeof Symbol.toPrimitive&&(we[Symbol.toPrimitive]=Ee)}var Ie=xe("Object.prototype.toString"),ke=Object.getOwnPropertyDescriptor,Me=Pe?function(t){if(!t||"object"!=typeof t)return!1;var e=ke(t,"lastIndex");if(!(e&&Se(e,"value")))return!1;try{je(t,we)}catch(t){return t===Oe}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===Ie(t)},Fe={exports:{}},Te=function(){return"string"==typeof function(){}.name},Re=Object.getOwnPropertyDescriptor;if(Re)try{Re([],"length")}catch(t){Re=null}Te.functionsHaveConfigurableNames=function(){if(!Te()||!Re)return!1;var t=Re((function(){}),"name");return!!t&&!!t.configurable};var De=Function.prototype.bind;Te.boundFunctionsHaveNames=function(){return Te()&&"function"==typeof De&&""!==function(){}.bind().name};var Ne=Te;!function(t){var e=Ne.functionsHaveConfigurableNames(),r=Object,n=TypeError;t.exports=function(){if(null!=this&&this!==r(this))throw new n("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},e&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})}(Fe);var Ue=Fe.exports,We=ce.supportsDescriptors,_e=Object.getOwnPropertyDescriptor,Be=function(){if(We&&"gim"===/a/gim.flags){var t=_e(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return Ue},Ce=ce.supportsDescriptors,$e=Be,Le=Object.getOwnPropertyDescriptor,qe=Object.defineProperty,Ge=TypeError,He=Object.getPrototypeOf,ze=/a/,Ve=ce,Je=Fe.exports,Ze=Be,Ke=function(){if(!Ce||!He)throw new Ge("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=$e(),e=He(ze),r=Le(e,"flags");return r&&r.get===t||qe(e,"flags",{configurable:!0,enumerable:!1,get:t}),t},Xe=(0,Bt.exports)(Ze());Ve(Xe,{getPolyfill:Ze,implementation:Je,shim:Ke});var Ye,Qe,tr=Xe,er={}.toString,rr=Array.isArray||function(t){return"[object Array]"==er.call(t)},nr=Date.prototype.getDay,or=Object.prototype.toString,ir=nt();function ar(){if(Qe)return Ye;Qe=1;var t=String.prototype.valueOf,e=Object.prototype.toString,r=nt();return Ye=function(n){return"string"==typeof n||"object"==typeof n&&(r?function(e){try{return t.call(e),!0}catch(t){return!1}}(n):"[object String]"===e.call(n))},Ye}var ur=Number.prototype.toString,cr=Object.prototype.toString,lr=nt(),fr=qt,pr=fr("Boolean.prototype.toString"),yr=fr("Object.prototype.toString"),sr=nt(),dr={exports:{}},gr=Object.prototype.toString;if(at()){var br=Symbol.prototype.toString,vr=/^Symbol\(.*\)$/;dr.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==gr.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&vr.test(br.call(t))}(t)}catch(t){return!1}}}else dr.exports=function(t){return!1};var hr={exports:{}},mr="undefined"!=typeof BigInt&&BigInt;if("function"==typeof mr&&"function"==typeof BigInt&&"bigint"==typeof mr(42)&&"bigint"==typeof BigInt(42)){var Sr=BigInt.prototype.valueOf;hr.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return Sr.call(t),!0}catch(t){}return!1}(t))}}else hr.exports=function(t){return!1};var jr,Or=ar(),wr=function(t){return"number"==typeof t||"object"==typeof t&&(lr?function(t){try{return ur.call(t),!0}catch(t){return!1}}(t):"[object Number]"===cr.call(t))},Ar=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(sr&&Symbol.toStringTag in t?function(t){try{return pr(t),!0}catch(t){return!1}}(t):"[object Boolean]"===yr(t))},xr=dr.exports,Pr=hr.exports,Er="function"==typeof Map&&Map.prototype?Map:null,Ir="function"==typeof Set&&Set.prototype?Set:null;Er||(jr=function(t){return!1});var kr=Er?Map.prototype.has:null,Mr=Ir?Set.prototype.has:null;jr||kr||(jr=function(t){return!1});var Fr,Tr=jr||function(t){if(!t||"object"!=typeof t)return!1;try{if(kr.call(t),Mr)try{Mr.call(t)}catch(t){return!0}return t instanceof Er}catch(t){}return!1},Rr="function"==typeof Map&&Map.prototype?Map:null,Dr="function"==typeof Set&&Set.prototype?Set:null;Dr||(Fr=function(t){return!1});var Nr=Rr?Map.prototype.has:null,Ur=Dr?Set.prototype.has:null;Fr||Ur||(Fr=function(t){return!1});var Wr,_r=Fr||function(t){if(!t||"object"!=typeof t)return!1;try{if(Ur.call(t),Nr)try{Nr.call(t)}catch(t){return!0}return t instanceof Dr}catch(t){}return!1},Br="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,Cr="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;Br||(Wr=function(t){return!1});var $r=Br?Br.prototype.has:null,Lr=Cr?Cr.prototype.has:null;Wr||$r||(Wr=function(t){return!1});var qr=Wr||function(t){if(!t||"object"!=typeof t)return!1;try{if($r.call(t,$r),Lr)try{Lr.call(t,Lr)}catch(t){return!0}return t instanceof Br}catch(t){}return!1},Gr={exports:{}},Hr=qt,zr=_t("%WeakSet%",!0),Vr=Hr("WeakSet.prototype.has",!0);if(Vr){var Jr=Hr("WeakMap.prototype.has",!0);Gr.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(Vr(t,Vr),Jr)try{Jr(t,Jr)}catch(t){return!0}return t instanceof zr}catch(t){}return!1}}else Gr.exports=function(t){return!1};var Zr=Tr,Kr=_r,Xr=qr,Yr=Gr.exports,Qr={exports:{}},tn=Zt;if(at()||et()()){var en=Symbol.iterator;Qr.exports=function(t){return null!=t&&void 0!==t[en]?t[en]():tn(t)?Array.prototype[en].call(t):void 0}}else{var rn=rr,nn=ar(),on=_t,an=on("%Map%",!0),un=on("%Set%",!0),cn=qt,ln=cn("Array.prototype.push"),fn=cn("String.prototype.charCodeAt"),pn=cn("String.prototype.slice"),yn=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},sn=function(t,e){if(rn(t)||tn(t))return yn(t);if(nn(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=fn(t,e);if(r<55296||r>56319)return e+1;var n=fn(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=pn(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(an||un){var dn=Tr,gn=_r,bn=cn("Map.prototype.forEach",!0),vn=cn("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var hn=cn("Map.prototype.iterator",!0),mn=cn("Set.prototype.iterator",!0),Sn=function(t){var e=!1;return{next:function(){try{return{done:e,value:e?void 0:t.next()}}catch(t){return e=!0,{done:!0,value:void 0}}}}};var jn=cn("Map.prototype.@@iterator",!0)||cn("Map.prototype._es6-shim iterator_",!0),On=cn("Set.prototype.@@iterator",!0)||cn("Set.prototype._es6-shim iterator_",!0);Qr.exports=function(t){return function(t){if(dn(t)){if(hn)return Sn(hn(t));if(jn)return jn(t);if(bn){var e=[];return bn(t,(function(t,r){ln(e,[r,t])})),yn(e)}}if(gn(t)){if(mn)return Sn(mn(t));if(On)return On(t);if(vn){var r=[];return vn(t,(function(t){ln(r,t)})),yn(r)}}}(t)||sn(t)}}else Qr.exports=function(t){if(null!=t)return sn(t,!0)}}var wn=m(Object.freeze({__proto__:null,default:{}})),An="function"==typeof Map&&Map.prototype,xn=Object.getOwnPropertyDescriptor&&An?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Pn=An&&xn&&"function"==typeof xn.get?xn.get:null,En=An&&Map.prototype.forEach,In="function"==typeof Set&&Set.prototype,kn=Object.getOwnPropertyDescriptor&&In?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Mn=In&&kn&&"function"==typeof kn.get?kn.get:null,Fn=In&&Set.prototype.forEach,Tn="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Rn="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Dn="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Nn=Boolean.prototype.valueOf,Un=Object.prototype.toString,Wn=Function.prototype.toString,_n=String.prototype.match,Bn=String.prototype.slice,Cn=String.prototype.replace,$n=String.prototype.toUpperCase,Ln=String.prototype.toLowerCase,qn=RegExp.prototype.test,Gn=Array.prototype.concat,Hn=Array.prototype.join,zn=Array.prototype.slice,Vn=Math.floor,Jn="function"==typeof BigInt?BigInt.prototype.valueOf:null,Zn=Object.getOwnPropertySymbols,Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Xn="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Yn="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Xn||"symbol")?Symbol.toStringTag:null,Qn=Object.prototype.propertyIsEnumerable,to=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function eo(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||qn.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-Vn(-t):Vn(t);if(n!==t){var o=String(n),i=Bn.call(e,o.length+1);return Cn.call(o,r,"$&_")+"."+Cn.call(Cn.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Cn.call(e,r,"$&_")}var ro=wn,no=ro.custom,oo=lo(no)?no:null;function io(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function ao(t){return Cn.call(String(t),/"/g,"&quot;")}function uo(t){return!("[object Array]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}function co(t){return!("[object RegExp]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}function lo(t){if(Xn)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Kn)return!1;try{return Kn.call(t),!0}catch(t){}return!1}var fo=Object.prototype.hasOwnProperty||function(t){return t in this};function po(t,e){return fo.call(t,e)}function yo(t){return Un.call(t)}function so(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function go(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return go(Bn.call(t,0,e.maxStringLength),e)+n}return io(Cn.call(Cn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,bo),"single",e)}function bo(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+$n.call(e.toString(16))}function vo(t){return"Object("+t+")"}function ho(t){return t+" { ? }"}function mo(t,e,r,n){return t+" ("+e+") {"+(n?So(r,n):Hn.call(r,", "))+"}"}function So(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+Hn.call(t,","+r)+"\n"+e.prev}function jo(t,e){var r=uo(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=po(t,o)?e(t[o],t):""}var i,a="function"==typeof Zn?Zn(t):[];if(Xn){i={};for(var u=0;u<a.length;u++)i["$"+a[u]]=a[u]}for(var c in t)po(t,c)&&(r&&String(Number(c))===c&&c<t.length||Xn&&i["$"+c]instanceof Symbol||(qn.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if("function"==typeof Zn)for(var l=0;l<a.length;l++)Qn.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}var Oo,wo,Ao=_t,xo=qt,Po=function t(e,r,n,o){var i=r||{};if(po(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(po(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!po(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(po(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(po(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return go(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var c=String(e);return u?eo(e,c):c}if("bigint"==typeof e){var l=String(e)+"n";return u?eo(e,l):l}var f=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=f&&f>0&&"object"==typeof e)return uo(e)?"[Array]":"[Object]";var p=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Hn.call(Array(t.indent+1)," ")}return{base:r,prev:Hn.call(Array(e+1),r)}}(i,n);if(void 0===o)o=[];else if(so(o,e)>=0)return"[Circular]";function y(e,r,a){if(r&&(o=zn.call(o)).push(r),a){var u={depth:i.depth};return po(i,"quoteStyle")&&(u.quoteStyle=i.quoteStyle),t(e,u,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e&&!co(e)){var s=function(t){if(t.name)return t.name;var e=_n.call(Wn.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),d=jo(e,y);return"[Function"+(s?": "+s:" (anonymous)")+"]"+(d.length>0?" { "+Hn.call(d,", ")+" }":"")}if(lo(e)){var g=Xn?Cn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Kn.call(e);return"object"!=typeof e||Xn?g:vo(g)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var b="<"+Ln.call(String(e.nodeName)),v=e.attributes||[],h=0;h<v.length;h++)b+=" "+v[h].name+"="+io(ao(v[h].value),"double",i);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+Ln.call(String(e.nodeName))+">"}if(uo(e)){if(0===e.length)return"[]";var m=jo(e,y);return p&&!function(t){for(var e=0;e<t.length;e++)if(so(t[e],"\n")>=0)return!1;return!0}(m)?"["+So(m,p)+"]":"[ "+Hn.call(m,", ")+" ]"}if(function(t){return!("[object Error]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}(e)){var S=jo(e,y);return"cause"in Error.prototype||!("cause"in e)||Qn.call(e,"cause")?0===S.length?"["+String(e)+"]":"{ ["+String(e)+"] "+Hn.call(S,", ")+" }":"{ ["+String(e)+"] "+Hn.call(Gn.call("[cause]: "+y(e.cause),S),", ")+" }"}if("object"==typeof e&&a){if(oo&&"function"==typeof e[oo]&&ro)return ro(e,{depth:f-n});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!Pn||!t||"object"!=typeof t)return!1;try{Pn.call(t);try{Mn.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var j=[];return En&&En.call(e,(function(t,r){j.push(y(r,e,!0)+" => "+y(t,e))})),mo("Map",Pn.call(e),j,p)}if(function(t){if(!Mn||!t||"object"!=typeof t)return!1;try{Mn.call(t);try{Pn.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var O=[];return Fn&&Fn.call(e,(function(t){O.push(y(t,e))})),mo("Set",Mn.call(e),O,p)}if(function(t){if(!Tn||!t||"object"!=typeof t)return!1;try{Tn.call(t,Tn);try{Rn.call(t,Rn)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return ho("WeakMap");if(function(t){if(!Rn||!t||"object"!=typeof t)return!1;try{Rn.call(t,Rn);try{Tn.call(t,Tn)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return ho("WeakSet");if(function(t){if(!Dn||!t||"object"!=typeof t)return!1;try{return Dn.call(t),!0}catch(t){}return!1}(e))return ho("WeakRef");if(function(t){return!("[object Number]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}(e))return vo(y(Number(e)));if(function(t){if(!t||"object"!=typeof t||!Jn)return!1;try{return Jn.call(t),!0}catch(t){}return!1}(e))return vo(y(Jn.call(e)));if(function(t){return!("[object Boolean]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}(e))return vo(Nn.call(e));if(function(t){return!("[object String]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}(e))return vo(y(String(e)));if(!function(t){return!("[object Date]"!==yo(t)||Yn&&"object"==typeof t&&Yn in t)}(e)&&!co(e)){var w=jo(e,y),A=to?to(e)===Object.prototype:e instanceof Object||e.constructor===Object,x=e instanceof Object?"":"null prototype",P=!A&&Yn&&Object(e)===e&&Yn in e?Bn.call(yo(e),8,-1):x?"Object":"",E=(A||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(P||x?"["+Hn.call(Gn.call([],P||[],x||[]),": ")+"] ":"");return 0===w.length?E+"{}":p?E+"{"+So(w,p)+"}":E+"{ "+Hn.call(w,", ")+" }"}return String(e)},Eo=Ao("%TypeError%"),Io=Ao("%WeakMap%",!0),ko=Ao("%Map%",!0),Mo=xo("WeakMap.prototype.get",!0),Fo=xo("WeakMap.prototype.set",!0),To=xo("WeakMap.prototype.has",!0),Ro=xo("Map.prototype.get",!0),Do=xo("Map.prototype.set",!0),No=xo("Map.prototype.has",!0),Uo=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},Wo=Function.prototype.toString,_o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof _o&&"function"==typeof Object.defineProperty)try{Oo=Object.defineProperty({},"length",{get:function(){throw wo}}),wo={},_o((function(){throw 42}),null,Oo)}catch(t){t!==wo&&(_o=null)}else _o=null;var Bo=/^\s*class\b/,Co=function(t){try{var e=Wo.call(t);return Bo.test(e)}catch(t){return!1}},$o=function(t){try{return!Co(t)&&(Wo.call(t),!0)}catch(t){return!1}},Lo=Object.prototype.toString,qo="function"==typeof Symbol&&!!Symbol.toStringTag,Go=!(0 in[,]),Ho=function(){return!1};if("object"==typeof document){var zo=document.all;Lo.call(zo)===Lo.call(document.all)&&(Ho=function(t){if((Go||!t)&&(void 0===t||"object"==typeof t))try{var e=Lo.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}var Vo,Jo,Zo,Ko,Xo=_o?function(t){if(Ho(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{_o(t,null,Oo)}catch(t){if(t!==wo)return!1}return!Co(t)&&$o(t)}:function(t){if(Ho(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(qo)return $o(t);if(Co(t))return!1;var e=Lo.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&$o(t)},Yo=Xo,Qo=Object.prototype.toString,ti=Object.prototype.hasOwnProperty,ei=function(t,e,r){for(var n=0,o=t.length;n<o;n++)ti.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))},ri=function(t,e,r){for(var n=0,o=t.length;n<o;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)},ni=function(t,e,r){for(var n in t)ti.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))},oi=function(t,e,r){if(!Yo(e))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===Qo.call(t)?ei(t,e,n):"string"==typeof t?ri(t,e,n):ni(t,e,n)},ii=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],ai="undefined"==typeof globalThis?h:globalThis,ui=function(){for(var t=[],e=0;e<ii.length;e++)"function"==typeof ai[ii[e]]&&(t[t.length]=ii[e]);return t};function ci(){if(Jo)return Vo;Jo=1;var t=_t("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch(e){t=null}return Vo=t}var li=oi,fi=ui,pi=qt,yi=pi("Object.prototype.toString"),si=nt(),di="undefined"==typeof globalThis?h:globalThis,gi=fi(),bi=pi("String.prototype.slice"),vi={},hi=ci(),mi=Object.getPrototypeOf;si&&hi&&mi&&li(gi,(function(t){if("function"==typeof di[t]){var e=new di[t];if(Symbol.toStringTag in e){var r=mi(e),n=hi(r,Symbol.toStringTag);if(!n){var o=mi(r);n=hi(o,Symbol.toStringTag)}vi[t]=n.get}}}));var Si=function(){if(Ko)return Zo;Ko=1;var t=oi,e=ui,r=qt,n=r("Object.prototype.toString"),o=nt(),i="undefined"==typeof globalThis?h:globalThis,a=e(),u=r("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},c=r("String.prototype.slice"),l={},f=ci(),p=Object.getPrototypeOf;return o&&f&&p&&t(a,(function(t){var e=new i[t];if(Symbol.toStringTag in e){var r=p(e),n=f(r,Symbol.toStringTag);if(!n){var o=p(r);n=f(o,Symbol.toStringTag)}l[t]=n.get}})),Zo=function(e){if(!e||"object"!=typeof e)return!1;if(!o||!(Symbol.toStringTag in e)){var r=c(n(e),8,-1);return u(a,r)>-1}return!!f&&function(e){var r=!1;return t(l,(function(t,n){if(!r)try{r=t.call(e)===n}catch(t){}})),r}(e)},Zo}(),ji=tt,Oi=et()(),wi=qt,Ai=Object,xi=wi("Array.prototype.push"),Pi=wi("Object.prototype.propertyIsEnumerable"),Ei=Oi?Object.getOwnPropertySymbols:null,Ii=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=Ai(t);if(1===arguments.length)return r;for(var n=1;n<arguments.length;++n){var o=Ai(arguments[n]),i=ji(o),a=Oi&&(Object.getOwnPropertySymbols||Ei);if(a)for(var u=a(o),c=0;c<u.length;++c){var l=u[c];Pi(o,l)&&xi(i,l)}for(var f=0;f<i.length;++f){var p=i[f];if(Pi(o,p)){var y=o[p];r[p]=y}}}return r},ki=Ii,Mi=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var a in o)i+=a;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?ki:Object.assign:ki},Fi=ce,Ti=Mi,Ri=ce,Di=Ii,Ni=Mi,Ui=function(){var t=Ti();return Fi(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},Wi=Bt.exports.apply(Ni()),_i=function(t,e){return Wi(Object,arguments)};Ri(_i,{getPolyfill:Ni,implementation:Di,shim:Ui});var Bi=_i,Ci=tt,$i=Zt,Li=Ae,qi=Me,Gi=tr,Hi=rr,zi=function(t){return"object"==typeof t&&null!==t&&(ir?function(t){try{return nr.call(t),!0}catch(t){return!1}}(t):"[object Date]"===or.call(t))},Vi=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:Or(t)?"String":wr(t)?"Number":Ar(t)?"Boolean":xr(t)?"Symbol":Pr(t)?"BigInt":void 0},Ji=_t,Zi=qt,Ki=function(t){if(t&&"object"==typeof t){if(Zr(t))return"Map";if(Kr(t))return"Set";if(Xr(t))return"WeakMap";if(Yr(t))return"WeakSet"}return!1},Xi=Qr.exports,Yi=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new Eo("Side channel does not contain "+Po(t))},get:function(n){if(Io&&n&&("object"==typeof n||"function"==typeof n)){if(t)return Mo(t,n)}else if(ko){if(e)return Ro(e,n)}else if(r)return function(t,e){var r=Uo(t,e);return r&&r.value}(r,n)},has:function(n){if(Io&&n&&("object"==typeof n||"function"==typeof n)){if(t)return To(t,n)}else if(ko){if(e)return No(e,n)}else if(r)return function(t,e){return!!Uo(t,e)}(r,n);return!1},set:function(n,o){Io&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new Io),Fo(t,n,o)):ko?(e||(e=new ko),Do(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=Uo(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},Qi=function(t){return!!Si(t)&&(si&&Symbol.toStringTag in t?function(t){var e=!1;return li(vi,(function(r,n){if(!e)try{var o=r.call(t);o===n&&(e=o)}catch(t){}})),e}(t):bi(yi(t),8,-1))},ta=Bi,ea=Zi("ArrayBuffer.prototype.byteLength",!0);function ra(t){if(!t||"object"!=typeof t||!ea)return!1;try{return ea(t),!0}catch(t){return!1}}var na=Zi("Date.prototype.getTime"),oa=Object.getPrototypeOf,ia=Zi("Object.prototype.toString"),aa=Ji("%Set%",!0),ua=Zi("Map.prototype.has",!0),ca=Zi("Map.prototype.get",!0),la=Zi("Map.prototype.size",!0),fa=Zi("Set.prototype.add",!0),pa=Zi("Set.prototype.delete",!0),ya=Zi("Set.prototype.has",!0),sa=Zi("Set.prototype.size",!0);function da(t,e,r,n){for(var o,i=Xi(t);(o=i.next())&&!o.done;)if(ma(e,o.value,r,n))return pa(t,o.value),!0;return!1}function ga(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function ba(t,e,r,n,o,i){var a=ga(r);if(null!=a)return a;var u=ca(e,a),c=ta({},o,{strict:!1});return!(void 0===u&&!ua(e,a)||!ma(n,u,c,i))&&(!ua(t,a)&&ma(n,u,c,i))}function va(t,e,r){var n=ga(r);return null!=n?n:ya(e,n)&&!ya(t,n)}function ha(t,e,r,n,o,i){for(var a,u,c=Xi(t);(a=c.next())&&!a.done;)if(ma(r,u=a.value,o,i)&&ma(n,ca(e,u),o,i))return pa(t,u),!0;return!1}function ma(t,e,r,n){var o=r||{};if(o.strict?Li(t,e):t===e)return!0;if(Vi(t)!==Vi(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return o.strict?Li(t,e):t==e;var i,a=n.has(t),u=n.has(e);if(a&&u){if(n.get(t)===n.get(e))return!0}else i={};return a||n.set(t,i),u||n.set(e,i),function(t,e,r,n){var o,i;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(ia(t)!==ia(e))return!1;if($i(t)!==$i(e))return!1;var a=Hi(t),u=Hi(e);if(a!==u)return!1;var c=t instanceof Error,l=e instanceof Error;if(c!==l)return!1;if((c||l)&&(t.name!==e.name||t.message!==e.message))return!1;var f=qi(t),p=qi(e);if(f!==p)return!1;if((f||p)&&(t.source!==e.source||Gi(t)!==Gi(e)))return!1;var y=zi(t),s=zi(e);if(y!==s)return!1;if((y||s)&&na(t)!==na(e))return!1;if(r.strict&&oa&&oa(t)!==oa(e))return!1;if(Qi(t)!==Qi(e))return!1;var d=Sa(t),g=Sa(e);if(d!==g)return!1;if(d||g){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var b=ra(t),v=ra(e);if(b!==v)return!1;if(b||v)return ea(t)===ea(e)&&("function"==typeof Uint8Array&&ma(new Uint8Array(t),new Uint8Array(e),r,n));if(typeof t!=typeof e)return!1;var h=Ci(t),m=Ci(e);if(h.length!==m.length)return!1;for(h.sort(),m.sort(),o=h.length-1;o>=0;o--)if(h[o]!=m[o])return!1;for(o=h.length-1;o>=0;o--)if(!ma(t[i=h[o]],e[i],r,n))return!1;var S=Ki(t),j=Ki(e);if(S!==j)return!1;if("Set"===S||"Set"===j)return function(t,e,r,n){if(sa(t)!==sa(e))return!1;var o,i,a,u=Xi(t),c=Xi(e);for(;(o=u.next())&&!o.done;)if(o.value&&"object"==typeof o.value)a||(a=new aa),fa(a,o.value);else if(!ya(e,o.value)){if(r.strict)return!1;if(!va(t,e,o.value))return!1;a||(a=new aa),fa(a,o.value)}if(a){for(;(i=c.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!da(a,i.value,r.strict,n))return!1}else if(!r.strict&&!ya(t,i.value)&&!da(a,i.value,r.strict,n))return!1;return 0===sa(a)}return!0}(t,e,r,n);if("Map"===S)return function(t,e,r,n){if(la(t)!==la(e))return!1;var o,i,a,u,c,l,f=Xi(t),p=Xi(e);for(;(o=f.next())&&!o.done;)if(u=o.value[0],c=o.value[1],u&&"object"==typeof u)a||(a=new aa),fa(a,u);else if(void 0===(l=ca(e,u))&&!ua(e,u)||!ma(c,l,r,n)){if(r.strict)return!1;if(!ba(t,e,u,c,r,n))return!1;a||(a=new aa),fa(a,u)}if(a){for(;(i=p.next())&&!i.done;)if(u=i.value[0],l=i.value[1],u&&"object"==typeof u){if(!ha(a,t,u,l,r,n))return!1}else if(!(r.strict||t.has(u)&&ma(ca(t,u),l,r,n)||ha(a,t,u,l,ta({},r,{strict:!1}),n)))return!1;return 0===sa(a)}return!0}(t,e,r,n);return!0}(t,e,o,n)}function Sa(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&(!(t.length>0&&"number"!=typeof t[0])&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))))}var ja=function(t,e,r){return ma(t,e,r,Yi())};const Oa=()=>{};function wa(t){const{ariaLabel:n,className:o,defaultValue:l,status:p,footer:y,emptyOptionCaption:s,multiSelect:d,id:g,options:b,tabIndex:v,styles:h,updateFilters:m,onTriggerClick:S,onContentScroll:j}=t,[w,A]=i(""),[x,P]=i([]),[E,I]=i([]),[M,F]=i(!1),[T,R]=i(0),D=u(!1),N=u(null),U=u(null),W=k(N.current,M),_=a((t=>{0===(null==t?void 0:t.length)?(A(null!=s?s:""),I([])):(A(t.map((t=>t.caption)).join(",")),I((e=>ja(t,e,{strict:!0})?e:t)))}),[s]),B=a((t=>{d?_(function(t,e){const r=[...t],n=t.findIndex(Aa(e));n>-1?r.splice(n,1):r.push(e);return r}(E,t)):(A(t.caption),I([t]),F(!1))}),[E,d,_]);var C,$;r((()=>{const t=t=>{if(Array.isArray(C)){if(C.some((e=>!e.current||e.current.contains(t.target))))return}else if(!C.current||C.current.contains(t.target))return;$()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[C=[N,U],$=()=>F(!1)]),r((()=>{var t,e;if(!D.current&&x.length>0){if(d)if(l){const t=l.split(",").map((t=>x.find((e=>e.value===t)))).filter(Boolean);_(t)}else A(null!=s?s:"");else{const r=null!==(t=x.find((t=>t.value===l)))&&void 0!==t?t:x[0];A(null!==(e=null==r?void 0:r.caption)&&void 0!==e?e:""),I((t=>{const e=[r];return ja(e,t,{strict:!0})?t:e}))}D.current=!0}}),[l,s,d,x,_]),r((()=>{const t=[...d?[]:[{caption:null!=s?s:"",value:""}],...b];P((e=>ja(e,t,{strict:!0})?e:t)),D.current=!1}),[s,d,b,l]),r((()=>{null==m||m(E)}),[E]);const L=0===E.length||w===s,q=a((()=>{F((t=>!t)),setTimeout((()=>{var t,e;null===(e=null===(t=U.current)||void 0===t?void 0:t.querySelector("li.filter-selected"))||void 0===e||e.focus()}),10),S&&S()}),[S]);return e("div",{className:O("dropdown-container",o),"data-focusindex":null!=v?v:0,ref:N,style:h},p||e("input",{value:L?"":w,placeholder:L?s:void 0,className:"form-control dropdown-triggerer",onClick:q,onChange:Oa,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),q())},"aria-haspopup":!0,ref:t=>{t&&t.clientWidth&&R(t.clientWidth)},"aria-expanded":M,"aria-controls":"".concat(g,"-dropdown-list"),"aria-label":n}),M?(()=>{const t=x.length>(d?0:1),r=t?e("ul",{id:"".concat(g,"-dropdown-list"),className:"dropdown-list dropdown-content-section",role:"menu","data-focusindex":0},t&&x.map(((t,r)=>e("li",{className:O({"filter-selected":!d&&xa(E,t)}),key:"val:".concat(t.value),onClick:e=>{e.preventDefault(),e.stopPropagation(),B(t)},onKeyDown:e=>{var n,o;"Enter"===e.key||" "===e.key?(e.preventDefault(),e.stopPropagation(),B(t)):("Tab"===e.key&&(r+1===x.length||e.shiftKey&&0===r)||"Escape"===e.key)&&(e.preventDefault(),F(!1),null===(o=null===(n=N.current)||void 0===n?void 0:n.querySelector("input"))||void 0===o||o.focus())},role:"menuitem",tabIndex:0},d?e(c,null,e("input",{id:"".concat(g,"_checkbox_toggle_").concat(r),type:"checkbox",checked:xa(E,t),onChange:Oa}),e("label",{htmlFor:"".concat(g,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"}},t.caption)):e("div",{className:"filter-label"},t.caption))))):null;return f(e("div",{className:"dropdown-content",onScroll:j,ref:U,style:{position:"fixed",width:T,top:null==W?void 0:W.bottom,left:null==W?void 0:W.left,zIndex:102}},r,y),document.body)})():null)}function Aa(t){return e=>t.value===e.value}function xa(t,e){return!!t.find(Aa(e))}function Pa(t){const r=M(),n=$(t.context,t.widgetProps);return n.hasError?e(L,{error:n.error}):e(wa,{...n.value,id:r})}function Ea(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e}function Ia(t,e){let r=0,n=0;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];const u=(new Date).getTime()-n,c=()=>{r=0,n=(new Date).getTime(),t(...i)};r||(u>=e?c():r=window.setTimeout(c,e-u))}}const ka=(t,e,r)=>{t((t=>"available"===e.status&&e.hasMoreItems?t+r:t))};function Ma(t,e){return s(g(t.id),d(e))}function Fa(t,e){const r=e.length?d(e.slice()):b();return v(g(t.id),r)}function Ta(t,e,r,n){return o=>{const i=function(t,e){var r;return(""===(null===(r=e[0])||void 0===r?void 0:r.value)?[]:e).map((e=>t[e.value]))}(r,o);t({getFilterCondition(){if(!(i.length<1))return"Reference"===e.type?function(t,e){const r=e.map((e=>Ma(t,e)));return r.length>1?p(...r):r[0]}(e,i):function(t,e){const r=e.map((e=>Fa(t,[e])));return r.length>1?p(...r):r[0]}(e,i)}}),n&&n.execute()}}function Ra(){return e("div",{className:"form-control text-normal disabled"},"Not filterable")}function Da(t){const{loading:r}=t;return r?e("div",{className:"dropdown-footer dropdown-content-section"},e("div",{className:"dropdown-footer-item"},e("div",{className:"dropdown-loading"},"Loading..."))):null}function Na(t){let{dispatch:n,widgetProps:o,associationProps:i}=t;var c,f;const{association:p,optionsSource:y,getOptionLabel:s}=i,d=M(),g=p.filterable,[b,v,h]=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;var o;const i=u(0),a="loading"===t.status,c=0!==i.current,f=e=>{const r=e(i.current);i.current=r,t.limit!==r&&t.setLimit(r)},p=()=>f((t=>0===t?e:t)),y=l((()=>Ia(ka,n)),[n]),s=()=>y(f,t,e);return r((()=>f((()=>0))),[]),Ea(p,s,{isFetched:c,isLoading:a,hasMore:!!t.hasMoreItems,items:null!==(o=t.items)&&void 0!==o?o:[]})}(y),m=g?h.items:[],[S,j]=function(t,e){return Ea(t.map((t=>({value:t.id,caption:e(t)}))),Object.fromEntries(t.map((t=>[t.id,t]))))}(m,s),O=Ta(n,p,j),w=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{triggerZoneHeight:r=0}=e,n=u({callback:t,offset:Math.max(r,0),isInDeadZone:!1});n.current.callback=t;return a((t=>{const{current:{isInDeadZone:e,callback:r,offset:o}}=n,i=t.currentTarget.scrollHeight-o,a=Math.floor(i-t.currentTarget.scrollTop)<=Math.floor(t.currentTarget.clientHeight),u=!e&&a;n.current.isInDeadZone=a,u&&r(t)}),[])}(v,{triggerZoneHeight:100});return e(wa,{id:d,updateFilters:O,options:S,ariaLabel:null===(c=o.ariaLabel)||void 0===c?void 0:c.value,className:o.class,emptyOptionCaption:null===(f=o.emptyOptionCaption)||void 0===f?void 0:f.value,multiSelect:o.multiSelect,styles:o.style,tabIndex:o.tabIndex,status:g?void 0:e(Ra,null),footer:e(Da,{loading:h.isLoading}),onTriggerClick:b,onContentScroll:h.hasMore?w:void 0})}function Ua(t){let{context:r,widgetProps:n}=t;const o=null==(i=r).associationProperties?P(new x("referenceProperties is undefined")):E(i.associationProperties);var i;return o.hasError?e(L,{error:o.error}):e(Na,{widgetProps:n,associationProps:o.value,dispatch:r.filterDispatcher})}function Wa(t){const r=I();if(r.hasError)return e(L,{error:new F});const n=r.value.associationProperties?Ua:Pa;return e(n,{context:r.value,widgetProps:t})}export{Wa as default};
